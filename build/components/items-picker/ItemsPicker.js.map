{"version":3,"file":"ItemsPicker.js","sources":["../../../src/components/items-picker/ItemsPicker.tsx"],"sourcesContent":["import React, { ChangeEvent, useState, useEffect } from \"react\"\r\nimport { ReactState } from \"../types\"\r\nimport { SearchCriteria } from \"../datatable\"\r\nimport { ItemsPickerDisplay } from \"./ItemsPickerDisplay\"\r\n\r\nexport interface ItemsPickerProps<T> {\r\n  /**\r\n  * List of selectable items\r\n  */\r\n  title: string\r\n  /**\r\n   * List of selectable items\r\n   */\r\n  items: Array<T>\r\n  /**\r\n   * Fired when the selected items was updated\r\n   * @param {Array<T>} items - Selected items\r\n   */\r\n  onChange: (items: Array<T>) => () => void\r\n  /**\r\n   * Update the list items\r\n   * @param {SearchCriteria} criteria - Search criteria\r\n   */\r\n  updateCriteria?: (criteria: SearchCriteria) => void\r\n  /**\r\n   * Customize the rendering of the items in the list\r\n   * @param {T} item - Item to render\r\n   */\r\n  renderItem: (item: T) => JSX.Element\r\n}\r\n\r\nexport type ItemsPickerAction = \"SELECT\" | \"DESELECT\"\r\n\r\nexport const ItemsPicker = <A extends { id?: string }>(props: ItemsPickerProps<A>): JSX.Element => {\r\n  const { title, items, updateCriteria, onChange, renderItem }: ItemsPickerProps<A> = props\r\n  const [ selectedItems, setSelectedItem ]: ReactState<Array<A>> = useState<Array<A>>([])\r\n\r\n  useEffect(() => {\r\n    onChange(selectedItems)\r\n  }, [ selectedItems ])\r\n\r\n  const isAlreadySelected = (p: A) => !selectedItems.some((sp: A) => sp.id === p.id)\r\n  const selectableItems: Array<A> = items.filter(isAlreadySelected)\r\n\r\n  const searchItems = (event: ChangeEvent<HTMLInputElement>) => {\r\n    const text: string = event.target.value\r\n    updateCriteria({ global_search: text })\r\n  }\r\n\r\n  const loadMoreItems = () => {\r\n    const limit: number = items.length + 5\r\n    updateCriteria({ limit: limit })\r\n  }\r\n\r\n  const selectAllItems = () => {\r\n    setSelectedItem([ ...selectedItems, ...selectableItems ])\r\n  }\r\n\r\n  const removeAllItems = () => {\r\n    setSelectedItem([])\r\n  }\r\n\r\n  const toggleItem = (item: A, action: ItemsPickerAction) => () => {\r\n    if (action === \"SELECT\") {\r\n      setSelectedItem([ ...selectedItems, item ])\r\n    } else {\r\n      setSelectedItem(selectedItems.filter((i: A) => i.id !== item.id))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ItemsPickerDisplay<A>\r\n      title={title}\r\n      items={selectableItems}\r\n      selectedItems={selectedItems}\r\n      searchItems={searchItems}\r\n      loadMoreItems={loadMoreItems}\r\n      selectAllItems={selectAllItems}\r\n      removeAllItems={removeAllItems}\r\n      toggleItem={toggleItem}\r\n      renderItem={renderItem}\r\n    />\r\n  )\r\n}\r\n"],"names":["React"],"mappings":";;;;IAiCa,WAAW,GAAG,UAA4B,KAA0B;IACvE,IAAA,KAAK,GAAuE,KAAK,MAA5E,EAAE,KAAK,GAAgE,KAAK,MAArE,EAAE,cAAc,GAAgD,KAAK,eAArD,EAAE,QAAQ,GAAsC,KAAK,SAA3C,EAAE,UAAU,GAA0B,KAAK,WAA/B,CAA+B;IACnF,IAAA,KAA2D,QAAQ,CAAW,EAAE,CAAC,EAA/E,aAAa,QAAA,EAAE,eAAe,QAAiD,CAAA;IAEvF,SAAS,CAAC;QACR,QAAQ,CAAC,aAAa,CAAC,CAAA;KACxB,EAAE,CAAE,aAAa,CAAE,CAAC,CAAA;IAErB,IAAM,iBAAiB,GAAG,UAAC,CAAI,IAAK,OAAA,CAAC,aAAa,CAAC,IAAI,CAAC,UAAC,EAAK,IAAK,OAAA,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAA,CAAC,GAAA,CAAA;IAClF,IAAM,eAAe,GAAa,KAAK,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAA;IAEjE,IAAM,WAAW,GAAG,UAAC,KAAoC;QACvD,IAAM,IAAI,GAAW,KAAK,CAAC,MAAM,CAAC,KAAK,CAAA;QACvC,cAAc,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAA;KACxC,CAAA;IAED,IAAM,aAAa,GAAG;QACpB,IAAM,KAAK,GAAW,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA;QACtC,cAAc,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAA;KACjC,CAAA;IAED,IAAM,cAAc,GAAG;QACrB,eAAe,iCAAM,aAAa,GAAK,eAAe,EAAG,CAAA;KAC1D,CAAA;IAED,IAAM,cAAc,GAAG;QACrB,eAAe,CAAC,EAAE,CAAC,CAAA;KACpB,CAAA;IAED,IAAM,UAAU,GAAG,UAAC,IAAO,EAAE,MAAyB,IAAK,OAAA;QACzD,IAAI,MAAM,KAAK,QAAQ,EAAE;YACvB,eAAe,iCAAM,aAAa,IAAE,IAAI,GAAG,CAAA;SAC5C;aAAM;YACL,eAAe,CAAC,aAAa,CAAC,MAAM,CAAC,UAAC,CAAI,IAAK,OAAA,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,GAAA,CAAC,CAAC,CAAA;SAClE;KACF,GAAA,CAAA;IAED,QACEA,6BAAC,kBAAkB,IACjB,KAAK,EAAE,KAAK,EACZ,KAAK,EAAE,eAAe,EACtB,aAAa,EAAE,aAAa,EAC5B,WAAW,EAAE,WAAW,EACxB,aAAa,EAAE,aAAa,EAC5B,cAAc,EAAE,cAAc,EAC9B,cAAc,EAAE,cAAc,EAC9B,UAAU,EAAE,UAAU,EACtB,UAAU,EAAE,UAAU,GACtB,EACH;AACH;;;;"}