{"version":3,"file":"TunnelStepper.js","sources":["../../../src/components/stepper/TunnelStepper.tsx"],"sourcesContent":["import React, { ReactElement, useState } from \"react\"\r\nimport { Stepper, Step, StepLabel, makeStyles, useMediaQuery } from \"@material-ui/core\"\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\"\r\nimport { Theme } from \"@material-ui/core/styles\"\r\nimport { ReactState } from \"../types\"\r\nimport { TunnelStep, MobileStepper } from \"./index\"\r\n\r\nconst useStyles: (props?: any) => ClassNameMap<any> = makeStyles((theme: Theme) => ({\r\n  root : {\r\n    border       : `1px solid ${theme.inputs.border.color}`,\r\n    borderRadius : theme.card.borderRadius,\r\n    boxShadow    : theme.card.boxShadow,\r\n    overflow     : \"hidden\"\r\n  }\r\n}))\r\n\r\nexport interface IStep {\r\n  id: string\r\n  name: string\r\n  content : ReactElement\r\n}\r\n\r\nexport interface TunnelStepperProps {\r\n  /**\r\n   * List of steps to display in the stepper\r\n   */\r\n  steps: Array<IStep>\r\n  /**\r\n   * Fired when we go to the next step\r\n   * @param {string} id : Id of the current step, useful to process the data with the suitable action\r\n   * @param {any} data : Data sent by the current step\r\n   */\r\n  onNext : (id: string, data: any) => Promise<any>\r\n  /**\r\n   * initial current step\r\n   */\r\n  current? : number\r\n}\r\n\r\nexport const TunnelStepper = (props: TunnelStepperProps): JSX.Element => {\r\n  const classes: ClassNameMap<any> = useStyles()\r\n  const isMobile: boolean = useMediaQuery(\"(max-width: 450px)\")\r\n\r\n  const { steps, current, onNext }: TunnelStepperProps = props\r\n  const initialStep: number = current ? current : 0\r\n\r\n  const [ loading, setLoading ]: ReactState<boolean> = useState<boolean>()\r\n  const [ currentStep, setCurrentStep ]: ReactState<number> = useState(initialStep)\r\n  const isLast: boolean = currentStep + 1 === steps.length\r\n\r\n  const prev = () => {\r\n    if (currentStep > 0 ) {\r\n      setCurrentStep(currentStep - 1)\r\n    }\r\n  }\r\n\r\n  const next  = (stepId: string, data: any): Promise<any> => {\r\n    setLoading(true)\r\n\r\n    return onNext(stepId, data).then(() => {\r\n      if (currentStep < steps.length - 1) {\r\n        setCurrentStep(currentStep + 1 )\r\n      }\r\n      setLoading(false)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className = {classes.root}>\r\n      {!isMobile ?\r\n        <Stepper activeStep={currentStep}>\r\n          {steps.map((step: IStep) =>\r\n            <Step key={`step_${step.id}`}>\r\n              <StepLabel>\r\n                {step.name}\r\n              </StepLabel>\r\n            </Step>\r\n          )}\r\n        </Stepper> :\r\n        <MobileStepper\r\n          currentStep={currentStep}\r\n          stepsSize={steps.length}\r\n          onPrev={prev}\r\n          stepName={steps[currentStep].name}\r\n        />\r\n      }\r\n      <TunnelStep\r\n        step={steps[currentStep]}\r\n        next={next}\r\n        prev={prev}\r\n        loading={loading}\r\n        isLast={isLast}\r\n        isMobile={isMobile}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":["React"],"mappings":";;;;;AAOA,IAAM,SAAS,GAAuC,UAAU,CAAC,UAAC,KAAY,IAAK,QAAC;IAClF,IAAI,EAAG;QACL,MAAM,EAAS,eAAa,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,KAAO;QACvD,YAAY,EAAG,KAAK,CAAC,IAAI,CAAC,YAAY;QACtC,SAAS,EAAM,KAAK,CAAC,IAAI,CAAC,SAAS;QACnC,QAAQ,EAAO,QAAQ;KACxB;CACF,IAAC,CAAC,CAAA;IAyBU,aAAa,GAAG,UAAC,KAAyB;IACrD,IAAM,OAAO,GAAsB,SAAS,EAAE,CAAA;IAC9C,IAAM,QAAQ,GAAY,aAAa,CAAC,oBAAoB,CAAC,CAAA;IAErD,IAAA,KAAK,GAA0C,KAAK,MAA/C,EAAE,OAAO,GAAiC,KAAK,QAAtC,EAAE,MAAM,GAAyB,KAAK,OAA9B,CAA8B;IAC5D,IAAM,WAAW,GAAW,OAAO,GAAG,OAAO,GAAG,CAAC,CAAA;IAE3C,IAAA,KAA+C,QAAQ,EAAW,EAAhE,OAAO,QAAA,EAAE,UAAU,QAA6C,CAAA;IAClE,IAAA,KAAsD,QAAQ,CAAC,WAAW,CAAC,EAAzE,WAAW,QAAA,EAAE,cAAc,QAA8C,CAAA;IACjF,IAAM,MAAM,GAAY,WAAW,GAAG,CAAC,KAAK,KAAK,CAAC,MAAM,CAAA;IAExD,IAAM,IAAI,GAAG;QACX,IAAI,WAAW,GAAG,CAAC,EAAG;YACpB,cAAc,CAAC,WAAW,GAAG,CAAC,CAAC,CAAA;SAChC;KACF,CAAA;IAED,IAAM,IAAI,GAAI,UAAC,MAAc,EAAE,IAAS;QACtC,UAAU,CAAC,IAAI,CAAC,CAAA;QAEhB,OAAO,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC;YAC/B,IAAI,WAAW,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBAClC,cAAc,CAAC,WAAW,GAAG,CAAC,CAAE,CAAA;aACjC;YACD,UAAU,CAAC,KAAK,CAAC,CAAA;SAClB,CAAC,CAAA;KACH,CAAA;IAED,QACEA,sCAAK,SAAS,EAAI,OAAO,CAAC,IAAI;QAC3B,CAAC,QAAQ;YACRA,6BAAC,OAAO,IAAC,UAAU,EAAE,WAAW,IAC7B,KAAK,CAAC,GAAG,CAAC,UAAC,IAAW;gBACrB,OAAAA,6BAAC,IAAI,IAAC,GAAG,EAAE,UAAQ,IAAI,CAAC,EAAI;oBAC1BA,6BAAC,SAAS,QACP,IAAI,CAAC,IAAI,CACA,CACP;aAAA,CACR,CACO;YACVA,6BAAC,aAAa,IACZ,WAAW,EAAE,WAAW,EACxB,SAAS,EAAE,KAAK,CAAC,MAAM,EACvB,MAAM,EAAE,IAAI,EACZ,QAAQ,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC,IAAI,GACjC;QAEJA,6BAAC,UAAU,IACT,IAAI,EAAE,KAAK,CAAC,WAAW,CAAC,EACxB,IAAI,EAAE,IAAI,EACV,IAAI,EAAE,IAAI,EACV,OAAO,EAAE,OAAO,EAChB,MAAM,EAAE,MAAM,EACd,QAAQ,EAAE,QAAQ,GAClB,CACE,EACP;AACH;;;;"}