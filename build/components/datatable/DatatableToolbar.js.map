{"version":3,"file":"DatatableToolbar.js","sources":["../../../src/components/datatable/DatatableToolbar.tsx"],"sourcesContent":["import React, { ChangeEvent, SyntheticEvent, useState } from \"react\"\r\nimport {\r\n  Toolbar, Typography, TextField, InputAdornment, Menu,\r\n  ListItem, Checkbox, ListItemText, Fade\r\n} from \"@material-ui/core\"\r\nimport { VisibilityOff, Search } from \"@material-ui/icons\"\r\nimport { Column, SearchCriteria } from \"./models/models\"\r\nimport classNames from \"classnames\"\r\nimport { T } from \"../../conf/i18n\"\r\nimport { useToolbarStyles } from \"./styles/toolbarStyles\"\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\"\r\nimport { ActionMultiple, ReactState } from \"../types\"\r\nimport { ActionMenu, IconBtn } from \"../buttons\"\r\n\r\ninterface DatatableToolbarProps<T> {\r\n  columns: Array<Column<T>>\r\n  title: string\r\n  hasGlobalSearch: boolean\r\n  onToggleColumnVisibility: (col: Column<T>) => (e: SyntheticEvent) => void\r\n  columnsVisibility: any\r\n  multipleActions?: Array<ActionMultiple<T>>\r\n  selectedRows: Array<T>\r\n  hasLocalActions: boolean\r\n  onSearch: (criteria: SearchCriteria) => void\r\n}\r\n\r\ninterface MultipleActionsProps<T> {\r\n  multipleActions?: Array<ActionMultiple<T>>\r\n  selectedRows: Array<T>\r\n}\r\n\r\nconst MultipleActions = <A, >({ multipleActions, selectedRows }: MultipleActionsProps<A>): JSX.Element => {\r\n  return (\r\n    <ActionMenu\r\n      actionLabel={T.datatable.grouped_actions.label}\r\n      variant={\"contained\"}\r\n      color={\"primary\"}\r\n      actions={multipleActions.map((a: ActionMultiple<A>) => ({\r\n        label   : a.label,\r\n        onClick : a.action(selectedRows),\r\n        visible : true\r\n      }))}\r\n    />\r\n  )\r\n}\r\n\r\nconst DatatableToolbar = <A, >(props: DatatableToolbarProps<A>): JSX.Element => {\r\n  const classes: ClassNameMap<any> = useToolbarStyles()\r\n  const [ anchorEl, setAnchorEl ]: ReactState<any> = useState(null)\r\n\r\n  const { onSearch, columns, title, hasGlobalSearch, onToggleColumnVisibility, columnsVisibility, multipleActions,\r\n    selectedRows }: DatatableToolbarProps<A> = props\r\n  const numSelectedRows: number = selectedRows ? selectedRows.length : 0\r\n\r\n  const onSearchHandler = (event: ChangeEvent<HTMLInputElement>): void => {\r\n    onSearch({ global_search: event.target.value })\r\n  }\r\n\r\n  const handleClick = (event: SyntheticEvent): void => {\r\n    setAnchorEl(event.currentTarget)\r\n  }\r\n\r\n  const handleClose = (): void => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const displayMultipleActions: boolean = numSelectedRows > 0\r\n\r\n  return (\r\n    <div>\r\n      <Toolbar className={classNames(classes.root, { [classes.highlight]: numSelectedRows > 0 })}>\r\n        {displayMultipleActions &&\r\n        <Fade in={displayMultipleActions}>\r\n          <div className={classes.actionsContainer}>\r\n            <div className={classes.title}>\r\n              <Typography color=\"inherit\" variant=\"subtitle1\"> {T.datatable.grouped_actions.rows_selected(numSelectedRows)}</Typography>\r\n            </div>\r\n            <MultipleActions\r\n              multipleActions={multipleActions}\r\n              selectedRows={selectedRows}\r\n            />\r\n          </div>\r\n        </Fade>\r\n        }\r\n        {!displayMultipleActions &&\r\n        <Fade in={!displayMultipleActions}>\r\n          <div className={classes.actionsContainer}>\r\n            <div className={classes.title}>\r\n              <Typography variant=\"h6\" id=\"tableTitle\">{title}</Typography>\r\n            </div>\r\n            <div className={classes.actions}>\r\n              <div>\r\n                <IconBtn\r\n                  title={T.datatable.show_column_chooser}\r\n                  aria-owns={anchorEl ? \"column-visibility\" : undefined}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={handleClick}\r\n                >\r\n                  <VisibilityOff />\r\n                </IconBtn>\r\n                <Menu\r\n                  id=\"column-visibility\"\r\n                  anchorEl={anchorEl}\r\n                  open={Boolean(anchorEl)}\r\n                  onClose={handleClose}\r\n                >\r\n                  {columns.map((col: Column<A>) =>\r\n                    <ListItem key={col.field_name} dense button onClick={onToggleColumnVisibility(col)} className={classes.columnVisibilityListItems}>\r\n                      <Checkbox\r\n                        checked={columnsVisibility[col.field_name]}\r\n                        tabIndex={-1}\r\n                        disableRipple\r\n                      />\r\n                      <ListItemText primary={col.label} className={classes.noPadding} />\r\n                    </ListItem>\r\n                  )}\r\n                </Menu>\r\n              </div>\r\n              {hasGlobalSearch &&\r\n              <div className={classes.actions}>\r\n                <TextField\r\n                  type={T.global.search}\r\n                  className={classes.textField}\r\n                  onChange={onSearchHandler}\r\n                  InputProps={{\r\n                    startAdornment : (\r\n                      <InputAdornment position=\"start\">\r\n                        <Search />\r\n                      </InputAdornment>\r\n                    )\r\n                  }}\r\n                />\r\n              </div>\r\n              }\r\n            </div>\r\n          </div>\r\n        </Fade>\r\n        }\r\n      </Toolbar>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DatatableToolbar\r\n"],"names":["React"],"mappings":";;;;;;;;;;AA+BA,IAAM,eAAe,GAAG,UAAM,EAA0D;QAAxD,eAAe,qBAAA,EAAE,YAAY,kBAAA;IAC3D,QACEA,6BAAC,UAAU,IACT,WAAW,EAAE,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,EAC9C,OAAO,EAAE,WAAW,EACpB,KAAK,EAAE,SAAS,EAChB,OAAO,EAAE,eAAe,CAAC,GAAG,CAAC,UAAC,CAAoB,IAAK,QAAC;YACtD,KAAK,EAAK,CAAC,CAAC,KAAK;YACjB,OAAO,EAAG,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;YAChC,OAAO,EAAG,IAAI;SACf,IAAC,CAAC,GACH,EACH;AACH,CAAC,CAAA;IAEK,gBAAgB,GAAG,UAAM,KAA+B;;IAC5D,IAAM,OAAO,GAAsB,gBAAgB,EAAE,CAAA;IAC/C,IAAA,KAA6C,QAAQ,CAAC,IAAI,CAAC,EAAzD,QAAQ,QAAA,EAAE,WAAW,QAAoC,CAAA;IAEzD,IAAA,QAAQ,GAC6B,KAAK,SADlC,EAAE,OAAO,GACoB,KAAK,QADzB,EAAE,KAAK,GACa,KAAK,MADlB,EAAE,eAAe,GACJ,KAAK,gBADD,EAAE,wBAAwB,GAC9B,KAAK,yBADyB,EAAE,iBAAiB,GACjD,KAAK,kBAD4C,EAAE,eAAe,GAClE,KAAK,gBAD6D,EAC7G,YAAY,GAA+B,KAAK,aAApC,CAAoC;IAClD,IAAM,eAAe,GAAW,YAAY,GAAG,YAAY,CAAC,MAAM,GAAG,CAAC,CAAA;IAEtE,IAAM,eAAe,GAAG,UAAC,KAAoC;QAC3D,QAAQ,CAAC,EAAE,aAAa,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAA;KAChD,CAAA;IAED,IAAM,WAAW,GAAG,UAAC,KAAqB;QACxC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,CAAA;KACjC,CAAA;IAED,IAAM,WAAW,GAAG;QAClB,WAAW,CAAC,IAAI,CAAC,CAAA;KAClB,CAAA;IAED,IAAM,sBAAsB,GAAY,eAAe,GAAG,CAAC,CAAA;IAE3D,QACEA;QACEA,6BAAC,OAAO,IAAC,SAAS,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI,YAAI,GAAC,OAAO,CAAC,SAAS,IAAG,eAAe,GAAG,CAAC,MAAG;YACvF,sBAAsB;gBACvBA,6BAAC,IAAI,IAAC,EAAE,EAAE,sBAAsB;oBAC9BA,sCAAK,SAAS,EAAE,OAAO,CAAC,gBAAgB;wBACtCA,sCAAK,SAAS,EAAE,OAAO,CAAC,KAAK;4BAC3BA,6BAAC,UAAU,IAAC,KAAK,EAAC,SAAS,EAAC,OAAO,EAAC,WAAW;;gCAAG,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,aAAa,CAAC,eAAe,CAAC,CAAc,CACtH;wBACNA,6BAAC,eAAe,IACd,eAAe,EAAE,eAAe,EAChC,YAAY,EAAE,YAAY,GAC1B,CACE,CACD;YAEN,CAAC,sBAAsB;gBACxBA,6BAAC,IAAI,IAAC,EAAE,EAAE,CAAC,sBAAsB;oBAC/BA,sCAAK,SAAS,EAAE,OAAO,CAAC,gBAAgB;wBACtCA,sCAAK,SAAS,EAAE,OAAO,CAAC,KAAK;4BAC3BA,6BAAC,UAAU,IAAC,OAAO,EAAC,IAAI,EAAC,EAAE,EAAC,YAAY,IAAE,KAAK,CAAc,CACzD;wBACNA,sCAAK,SAAS,EAAE,OAAO,CAAC,OAAO;4BAC7BA;gCACEA,6BAAC,OAAO,IACN,KAAK,EAAE,CAAC,CAAC,SAAS,CAAC,mBAAmB,eAC3B,QAAQ,GAAG,mBAAmB,GAAG,SAAS,mBACvC,MAAM,EACpB,OAAO,EAAE,WAAW;oCAEpBA,6BAAC,aAAa,OAAG,CACT;gCACVA,6BAAC,IAAI,IACH,EAAE,EAAC,mBAAmB,EACtB,QAAQ,EAAE,QAAQ,EAClB,IAAI,EAAE,OAAO,CAAC,QAAQ,CAAC,EACvB,OAAO,EAAE,WAAW,IAEnB,OAAO,CAAC,GAAG,CAAC,UAAC,GAAc;oCAC1B,OAAAA,6BAAC,QAAQ,IAAC,GAAG,EAAE,GAAG,CAAC,UAAU,EAAE,KAAK,QAAC,MAAM,QAAC,OAAO,EAAE,wBAAwB,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,yBAAyB;wCAC9HA,6BAAC,QAAQ,IACP,OAAO,EAAE,iBAAiB,CAAC,GAAG,CAAC,UAAU,CAAC,EAC1C,QAAQ,EAAE,CAAC,CAAC,EACZ,aAAa,SACb;wCACFA,6BAAC,YAAY,IAAC,OAAO,EAAE,GAAG,CAAC,KAAK,EAAE,SAAS,EAAE,OAAO,CAAC,SAAS,GAAI,CACzD;iCAAA,CACZ,CACI,CACH;4BACL,eAAe;gCAChBA,sCAAK,SAAS,EAAE,OAAO,CAAC,OAAO;oCAC7BA,6BAAC,SAAS,IACR,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EACrB,SAAS,EAAE,OAAO,CAAC,SAAS,EAC5B,QAAQ,EAAE,eAAe,EACzB,UAAU,EAAE;4CACV,cAAc,GACZA,6BAAC,cAAc,IAAC,QAAQ,EAAC,OAAO;gDAC9BA,6BAAC,MAAM,OAAG,CACK,CAClB;yCACF,GACD,CACE,CAEF,CACF,CACD,CAEC,CACN,EACP;AACH;;;;"}