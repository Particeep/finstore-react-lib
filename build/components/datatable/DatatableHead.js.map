{"version":3,"file":"DatatableHead.js","sources":["../../../src/components/datatable/DatatableHead.tsx"],"sourcesContent":["import React from \"react\"\r\nimport { TableHead, TableCell, TableRow, TableSortLabel, Tooltip, Checkbox } from \"@material-ui/core\"\r\nimport { useHeadStyles } from \"./styles/headStyles\"\r\nimport { Column, OrderType, SearchCriteria } from \"./models/models\"\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\"\r\n\r\ninterface CellWithSortProps<D> {\r\n  col: Column<D>\r\n  sortHandler: () => void\r\n  sortCriteria: SearchCriteria\r\n}\r\n\r\nconst CellWithSort = <E, >({ col, sortHandler, sortCriteria }: CellWithSortProps<E>) => {\r\n  const canSort: boolean = col.canSort !== undefined ? col.canSort : true\r\n  if (canSort) {\r\n    return (\r\n      <Tooltip\r\n        title=\"Sort\"\r\n        placement={col.type === \"number\" ? \"bottom-end\" : \"bottom-start\"}\r\n        enterDelay={300}\r\n      >\r\n        <TableSortLabel\r\n          active={sortCriteria.sort_by === col.field_name}\r\n          direction={sortCriteria.order_by}\r\n          onClick={sortHandler}\r\n        >\r\n          {col.label}\r\n        </TableSortLabel>\r\n      </Tooltip>\r\n    )\r\n  } else {\r\n    return (<span>{col.label}</span>)\r\n  }\r\n}\r\n\r\ninterface DatatableHeadProps<T> {\r\n  columns: Array<Column<T>>\r\n  columnsVisibility: any\r\n  searchCriteria: SearchCriteria\r\n  onSort: (sorting: SearchCriteria) => void\r\n  displayLocalActions: boolean\r\n  selectedRows: Array<T>\r\n  onToggleAllSelect: () => void\r\n  limit: number\r\n  hasMultipleActions: boolean\r\n  expandedRow: (row: T) => JSX.Element\r\n  isLocalTable: boolean\r\n  className: string\r\n}\r\n\r\nconst DatatableHead = <C, >(props: DatatableHeadProps<C>): JSX.Element => {\r\n\r\n  const { columns, columnsVisibility, searchCriteria, onSort, displayLocalActions, selectedRows, onToggleAllSelect, limit,\r\n    hasMultipleActions, expandedRow, isLocalTable, className }: DatatableHeadProps<C> = props\r\n\r\n  const classes: ClassNameMap<any> = useHeadStyles()\r\n\r\n  const createSortHandler = (col: Column<C>) => () => {\r\n    const { sort_by, order_by }: SearchCriteria = searchCriteria\r\n    let order: OrderType = \"desc\"\r\n    if (sort_by === col.field_name && order_by === \"desc\") {\r\n      order = \"asc\"\r\n    }\r\n    onSort({ sort_by: col.field_name, order_by: order })\r\n  }\r\n\r\n  const cellRender = (visibility: boolean, col: Column<C>): JSX.Element => {\r\n    if (visibility) {\r\n      return (\r\n        <TableCell\r\n          key={col.field_name}\r\n          align={col.type === \"number\" ? \"right\" : \"left\"}\r\n          {...!isLocalTable && { sortDirection: searchCriteria.sort_by === col.field_name ? searchCriteria.order_by : false }}\r\n        >\r\n          {!isLocalTable &&\r\n          <CellWithSort<C>\r\n            col={col}\r\n            sortHandler={createSortHandler(col)}\r\n            sortCriteria={{\r\n              order_by : searchCriteria.order_by,\r\n              sort_by  : searchCriteria.sort_by\r\n            }} />\r\n          }\r\n          {isLocalTable && <span>{col.label}</span>}\r\n        </TableCell>\r\n      )\r\n    } else {\r\n      return <React.Fragment key={col.field_name} />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TableHead {...{ className }}>\r\n      <TableRow className={classes.headerRow}>\r\n        {hasMultipleActions &&\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={selectedRows.length > 0 && selectedRows.length < limit}\r\n            checked={selectedRows.length === limit}\r\n            onChange={onToggleAllSelect}\r\n            style={{ paddingTop: 0, paddingBottom: 0 }}\r\n          />\r\n        </TableCell>\r\n        }\r\n        {expandedRow &&\r\n        <TableCell style={{ width: 30 }}>&nbsp;</TableCell>\r\n        }\r\n        {columns.map((col: Column<C>) => cellRender(!!columnsVisibility[col.field_name], col))}\r\n        {displayLocalActions && <TableCell className={classes.actionsCell}>&nbsp;</TableCell>}\r\n      </TableRow>\r\n    </TableHead>\r\n  )\r\n}\r\n\r\nexport default DatatableHead\r\n"],"names":["React"],"mappings":"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"}