{"version":3,"file":"ActionMenu.js","sources":["../../../src/components/buttons/ActionMenu.tsx"],"sourcesContent":["import React, { ChangeEvent, MouseEventHandler, ReactNode } from \"react\"\r\nimport { ListSubheader, MenuItem, ButtonProps, Menu, makeStyles } from \"@material-ui/core\"\r\nimport { Btn } from \"./Btn\"\r\nimport { ReactState } from \"../types\"\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\"\r\nimport { Theme } from \"@material-ui/core/styles/createMuiTheme\"\r\n\r\nexport interface IAction {\r\n  onClick?: MouseEventHandler<any>\r\n  label?: string\r\n  visible: boolean\r\n  separator?: string\r\n}\r\n\r\nexport interface ActionMenuProps {\r\n  /**\r\n   * Actions displayed in the menu\r\n   */\r\n  actions: Array<IAction>\r\n  /**\r\n   * Label of the open menu button\r\n   */\r\n  actionLabel: string\r\n  /**\r\n   * Icon of the open menu button\r\n   */\r\n  icon?: ReactNode\r\n  /**\r\n   * Style of the open menu button\r\n   */\r\n  variant?: ButtonProps[\"variant\"]\r\n  /**\r\n   * Color of the open menu button\r\n   */\r\n  color?: ButtonProps[\"color\"]\r\n}\r\n\r\nconst useStyles: (props?: any) => ClassNameMap<any> = makeStyles((theme: Theme) => ({\r\n  paper : {\r\n    marginTop : theme.spacing(4.2)\r\n  }\r\n}))\r\n\r\nconst renderActions = (actions: Array<IAction>): Array<JSX.Element> => {\r\n  return actions.filter((a: IAction) => a.visible).map((action: IAction, index: number) => {\r\n    if (action.separator) {\r\n      return <ListSubheader key={`separator-${index}`} component=\"div\">{action.separator}</ListSubheader>\r\n    } else {\r\n      return <MenuItem key={`${action.label}-${index}`} onClick={action.onClick}>{action.label}</MenuItem>\r\n    }\r\n  })\r\n}\r\n\r\nexport const ActionMenu = (props: ActionMenuProps): JSX.Element => {\r\n  const classes: ClassNameMap<any> = useStyles()\r\n  const [ anchorEl, setAnchorEl ]: ReactState<HTMLInputElement> = React.useState<HTMLInputElement>(undefined)\r\n  const { actions, actionLabel, icon, variant, color }: ActionMenuProps = props\r\n\r\n  const handleToggle = (event: ChangeEvent<any>): void => {\r\n    if (!Boolean(anchorEl)) {\r\n      setAnchorEl(event.currentTarget)\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n    } else {\r\n      setAnchorEl(undefined)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Btn\r\n        endIcon={icon}\r\n        color={color}\r\n        variant={variant}\r\n        onClick={handleToggle}\r\n      >{actionLabel}</Btn>\r\n      <Menu\r\n        open={Boolean(anchorEl)}\r\n        anchorEl={anchorEl}\r\n        onClick={handleToggle}\r\n        anchorOrigin={{\r\n          vertical   : \"bottom\",\r\n          horizontal : \"center\"\r\n        }}\r\n        transformOrigin={{\r\n          vertical   : \"top\",\r\n          horizontal : \"center\"\r\n        }}\r\n        classes={{ paper: classes.paper }}\r\n        disableScrollLock\r\n      >\r\n        {renderActions(actions)}\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["React"],"mappings":";;;;AAqCA,IAAM,SAAS,GAAuC,UAAU,CAAC,UAAC,KAAY,IAAK,QAAC;IAClF,KAAK,EAAG;QACN,SAAS,EAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;KAC/B;CACF,IAAC,CAAC,CAAA;AAEH,IAAM,aAAa,GAAG,UAAC,OAAuB;IAC5C,OAAO,OAAO,CAAC,MAAM,CAAC,UAAC,CAAU,IAAK,OAAA,CAAC,CAAC,OAAO,GAAA,CAAC,CAAC,GAAG,CAAC,UAAC,MAAe,EAAE,KAAa;QAClF,IAAI,MAAM,CAAC,SAAS,EAAE;YACpB,OAAOA,6BAAC,aAAa,IAAC,GAAG,EAAE,eAAa,KAAO,EAAE,SAAS,EAAC,KAAK,IAAE,MAAM,CAAC,SAAS,CAAiB,CAAA;SACpG;aAAM;YACL,OAAOA,6BAAC,QAAQ,IAAC,GAAG,EAAK,MAAM,CAAC,KAAK,SAAI,KAAO,EAAE,OAAO,EAAE,MAAM,CAAC,OAAO,IAAG,MAAM,CAAC,KAAK,CAAY,CAAA;SACrG;KACF,CAAC,CAAA;AACJ,CAAC,CAAA;IAEY,UAAU,GAAG,UAAC,KAAsB;IAC/C,IAAM,OAAO,GAAsB,SAAS,EAAE,CAAA;IACxC,IAAA,KAA0DA,cAAK,CAAC,QAAQ,CAAmB,SAAS,CAAC,EAAnG,QAAQ,QAAA,EAAE,WAAW,QAA8E,CAAA;IACnG,IAAA,OAAO,GAAyD,KAAK,QAA9D,EAAE,WAAW,GAA4C,KAAK,YAAjD,EAAE,IAAI,GAAsC,KAAK,KAA3C,EAAE,OAAO,GAA6B,KAAK,QAAlC,EAAE,KAAK,GAAsB,KAAK,MAA3B,CAA2B;IAE7E,IAAM,YAAY,GAAG,UAAC,KAAuB;QAC3C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YACtB,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,CAAA;YAChC,KAAK,CAAC,cAAc,EAAE,CAAA;YACtB,KAAK,CAAC,eAAe,EAAE,CAAA;SACxB;aAAM;YACL,WAAW,CAAC,SAAS,CAAC,CAAA;SACvB;KACF,CAAA;IAED,QACEA;QACEA,6BAAC,GAAG,IACF,OAAO,EAAE,IAAI,EACb,KAAK,EAAE,KAAK,EACZ,OAAO,EAAE,OAAO,EAChB,OAAO,EAAE,YAAY,IACrB,WAAW,CAAO;QACpBA,6BAAC,IAAI,IACH,IAAI,EAAE,OAAO,CAAC,QAAQ,CAAC,EACvB,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAE,YAAY,EACrB,YAAY,EAAE;gBACZ,QAAQ,EAAK,QAAQ;gBACrB,UAAU,EAAG,QAAQ;aACtB,EACD,eAAe,EAAE;gBACf,QAAQ,EAAK,KAAK;gBAClB,UAAU,EAAG,QAAQ;aACtB,EACD,OAAO,EAAE,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,EACjC,iBAAiB,UAEhB,aAAa,CAAC,OAAO,CAAC,CAClB,CACH,EACP;AACH;;;;"}